create table if not exists append_mode1(
    host string,
    ts timestamp,
    cpu double,
    TIME INDEX (ts),
    PRIMARY KEY(host)
)
engine=mito
with('append_mode'='true');

Affected Rows: 0

INSERT INTO append_mode1 VALUES ('host1',0, 0), ('host2', 1, 1,);

Affected Rows: 2

INSERT INTO append_mode1 VALUES ('host1',0, 0), ('host2', 1, 1,);

Affected Rows: 2

SELECT * from append_mode1 ORDER BY host, ts;

+-------+-------------------------+-----+
| host  | ts                      | cpu |
+-------+-------------------------+-----+
| host1 | 1970-01-01T00:00:00     | 0.0 |
| host1 | 1970-01-01T00:00:00     | 0.0 |
| host2 | 1970-01-01T00:00:00.001 | 1.0 |
| host2 | 1970-01-01T00:00:00.001 | 1.0 |
+-------+-------------------------+-----+

create table if not exists append_mode2(
    host string,
    ts timestamp,
    cpu double,
    TIME INDEX (ts),
    PRIMARY KEY(host)
)
engine=mito
with('append_mode'='false');

Affected Rows: 0

INSERT INTO append_mode2 VALUES ('host1',0, 0), ('host2', 1, 1,);

Affected Rows: 2

INSERT INTO append_mode2 VALUES ('host1',0, 10), ('host2', 1, 11,);

Affected Rows: 2

SELECT * from append_mode2 ORDER BY host, ts;

+-------+-------------------------+------+
| host  | ts                      | cpu  |
+-------+-------------------------+------+
| host1 | 1970-01-01T00:00:00     | 10.0 |
| host2 | 1970-01-01T00:00:00.001 | 11.0 |
+-------+-------------------------+------+

DROP TABLE append_mode1;

Affected Rows: 0

DROP TABLE append_mode2;

Affected Rows: 0

