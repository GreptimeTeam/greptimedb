CREATE TABLE t (ts TIMESTAMP TIME INDEX, j JSON(format = "structured") DEFAULT '{"foo": "bar"}');

Error: 1001(Unsupported), Unsupported default constraint for column: 'j', reason: json column cannot have a default value

CREATE TABLE t (ts TIMESTAMP TIME INDEX, j JSON(format = "structured"));

Affected Rows: 0

DESC TABLE t;

+--------+----------------------+-----+------+---------+---------------+
| Column | Type                 | Key | Null | Default | Semantic Type |
+--------+----------------------+-----+------+---------+---------------+
| ts     | TimestampMillisecond | PRI | NO   |         | TIMESTAMP     |
| j      | Json<"<Null>">       |     | YES  |         | FIELD         |
+--------+----------------------+-----+------+---------+---------------+

INSERT INTO t VALUES
(1762128001000, '{"int": 1}'),
(1762128002000, '{"int": 2, "list": [0.1, 0.2, 0.3]}'),
(1762128003000, '{"int": 3, "list": [0.4, 0.5, 0.6], "nested": {"a": {"x": "hello"}, "b": {"y": -1}}}');

Affected Rows: 3

DESC TABLE t;

+--------+---------------------------------------------------------------------------------------------------+-----+------+---------+---------------+
| Column | Type                                                                                              | Key | Null | Default | Semantic Type |
+--------+---------------------------------------------------------------------------------------------------+-----+------+---------+---------------+
| ts     | TimestampMillisecond                                                                              | PRI | NO   |         | TIMESTAMP     |
| j      | Json<{"int":"<Number>","list":["<Number>"],"nested":{"a":{"x":"<String>"},"b":{"y":"<Number>"}}}> |     | YES  |         | FIELD         |
+--------+---------------------------------------------------------------------------------------------------+-----+------+---------+---------------+

INSERT INTO t VALUES
(1762128004000, '{"int": 4, "bool": true, "nested": {"a": {"y": 1}}}'),
(1762128005000, '{"int": 5, "bool": false, "nested": {"b": {"x": "world"}}}');

Affected Rows: 2

DESC TABLE t;

+--------+-------------------------------------------------------------------------------------------------------------------------------------------------+-----+------+---------+---------------+
| Column | Type                                                                                                                                            | Key | Null | Default | Semantic Type |
+--------+-------------------------------------------------------------------------------------------------------------------------------------------------+-----+------+---------+---------------+
| ts     | TimestampMillisecond                                                                                                                            | PRI | NO   |         | TIMESTAMP     |
| j      | Json<{"bool":"<Bool>","int":"<Number>","list":["<Number>"],"nested":{"a":{"x":"<String>","y":"<Number>"},"b":{"x":"<String>","y":"<Number>"}}}> |     | YES  |         | FIELD         |
+--------+-------------------------------------------------------------------------------------------------------------------------------------------------+-----+------+---------+---------------+

INSERT INTO t VALUES (1762128006000, '{"int": 6, "list": [-6.0], "bool": true, "nested": {"a": {"x": "ax", "y": 66}, "b": {"y": -66, "x": "bx"}}}');

Affected Rows: 1

DESC TABLE t;

+--------+-------------------------------------------------------------------------------------------------------------------------------------------------+-----+------+---------+---------------+
| Column | Type                                                                                                                                            | Key | Null | Default | Semantic Type |
+--------+-------------------------------------------------------------------------------------------------------------------------------------------------+-----+------+---------+---------------+
| ts     | TimestampMillisecond                                                                                                                            | PRI | NO   |         | TIMESTAMP     |
| j      | Json<{"bool":"<Bool>","int":"<Number>","list":["<Number>"],"nested":{"a":{"x":"<String>","y":"<Number>"},"b":{"x":"<String>","y":"<Number>"}}}> |     | YES  |         | FIELD         |
+--------+-------------------------------------------------------------------------------------------------------------------------------------------------+-----+------+---------+---------------+

INSERT INTO t VALUES (1762128011000, '{}');

Error: 1004(InvalidArguments), Invalid InsertRequest, reason: empty json object is not supported, consider adding a dummy field

SELECT ts, j FROM t order by ts;

+---------------------+----------------------------------------------------------------------------------------+
| ts                  | j                                                                                      |
+---------------------+----------------------------------------------------------------------------------------+
| 2025-11-03T00:00:01 | {bool: , int: 1, list: , nested: }                                                     |
| 2025-11-03T00:00:02 | {bool: , int: 2, list: [0.1, 0.2, 0.3], nested: }                                      |
| 2025-11-03T00:00:03 | {bool: , int: 3, list: [0.4, 0.5, 0.6], nested: {a: {x: hello, y: }, b: {x: , y: -1}}} |
| 2025-11-03T00:00:04 | {bool: true, int: 4, list: , nested: {a: {x: , y: 1}, b: }}                            |
| 2025-11-03T00:00:05 | {bool: false, int: 5, list: , nested: {a: , b: {x: world, y: }}}                       |
| 2025-11-03T00:00:06 | {bool: true, int: 6, list: [-6.0], nested: {a: {x: ax, y: 66}, b: {x: bx, y: -66}}}    |
+---------------------+----------------------------------------------------------------------------------------+

DROP table t;

Affected Rows: 0

