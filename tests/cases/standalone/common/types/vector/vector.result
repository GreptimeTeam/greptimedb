CREATE TABLE t (ts TIMESTAMP TIME INDEX, v VECTOR(3));

Affected Rows: 0

INSERT INTO t VALUES
(1, "[1.0, 2.0, 3.0]"),
(2, "[4.0, 5.0, 6.0]"),
(3, "[7.0, 8.0, 9.0]");

Affected Rows: 3

-- SQLNESS PROTOCOL MYSQL
SELECT * FROM t;

+----------------------------+---------+
| ts                         | v       |
+----------------------------+---------+
| 1970-01-01 00:00:00.001000 | [1,2,3] |
| 1970-01-01 00:00:00.002000 | [4,5,6] |
| 1970-01-01 00:00:00.003000 | [7,8,9] |
+----------------------------+---------+

-- SQLNESS PROTOCOL POSTGRES
SELECT * FROM t;

+----------------------------+-----------+
| ts                         | v         |
+----------------------------+-----------+
| 1970-01-01 00:00:00.001000 | "[1,2,3]" |
| 1970-01-01 00:00:00.002000 | "[4,5,6]" |
| 1970-01-01 00:00:00.003000 | "[7,8,9]" |
+----------------------------+-----------+

-- Unexpected dimension --
INSERT INTO t VALUES
(4, "[1.0]");

Error: 1004(InvalidArguments), Invalid Vector: Failed to parse [1.0] to Vector value: wrong dimension

-- Invalid vector value --
INSERT INTO t VALUES
(5, "1.0,2.0,3.0");

Error: 1004(InvalidArguments), Invalid Vector: Failed to parse 1.0,2.0,3.0 to Vector value: not properly enclosed in brackets

-- Invalid vector value --
INSERT INTO t VALUES
(6, "[30h, 40s, 50m]");

Error: 1004(InvalidArguments), Invalid Vector: Failed to parse [30h, 40s, 50m] to Vector value: elements are not all float32

CREATE TABLE t2 (ts TIMESTAMP TIME INDEX, v VECTOR(3) DEFAULT '[1.0, 2.0, 3.0]');

Affected Rows: 0

INSERT INTO t2 (ts) VALUES
(1),
(2),
(3);

Affected Rows: 3

-- SQLNESS PROTOCOL MYSQL
SELECT * FROM t2;

+----------------------------+---------+
| ts                         | v       |
+----------------------------+---------+
| 1970-01-01 00:00:00.001000 | [1,2,3] |
| 1970-01-01 00:00:00.002000 | [1,2,3] |
| 1970-01-01 00:00:00.003000 | [1,2,3] |
+----------------------------+---------+

-- SQLNESS PROTOCOL POSTGRES
SELECT * FROM t2;

+----------------------------+-----------+
| ts                         | v         |
+----------------------------+-----------+
| 1970-01-01 00:00:00.001000 | "[1,2,3]" |
| 1970-01-01 00:00:00.002000 | "[1,2,3]" |
| 1970-01-01 00:00:00.003000 | "[1,2,3]" |
+----------------------------+-----------+

DROP TABLE t;

Affected Rows: 0

DROP TABLE t2;

Affected Rows: 0

