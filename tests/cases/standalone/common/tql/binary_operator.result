create table data (ts timestamp(3) time index, val double);

Affected Rows: 0

insert into data values (0, 1), (10000, 2), (20000, 3);

Affected Rows: 3

tql eval (0, 30, '10s'), data < 1;

++
++

tql eval (0, 30, '10s'), data + (1 < bool 2);

+---------------------+-------------------------------+
| ts                  | val + Float64(1) < Float64(2) |
+---------------------+-------------------------------+
| 1970-01-01T00:00:00 | 2.0                           |
| 1970-01-01T00:00:10 | 3.0                           |
| 1970-01-01T00:00:20 | 4.0                           |
| 1970-01-01T00:00:30 | 4.0                           |
+---------------------+-------------------------------+

tql eval (0, 30, '10s'), data + (1 > bool 2);

+---------------------+-------------------------------+
| ts                  | val + Float64(1) > Float64(2) |
+---------------------+-------------------------------+
| 1970-01-01T00:00:00 | 1.0                           |
| 1970-01-01T00:00:10 | 2.0                           |
| 1970-01-01T00:00:20 | 3.0                           |
| 1970-01-01T00:00:30 | 3.0                           |
+---------------------+-------------------------------+

drop table data;

Affected Rows: 1

-- Binary operator on table with multiple field columns
create table data (ts timestamp time index, val1 double, val2 double, val3 double);

Affected Rows: 0

insert into data values (0, 1, 100, 10000), (10000, 2, 200, 20000), (20000, 3, 300, 30000);

Affected Rows: 3

-- SQLNESS SORT_RESULT 3 1
tql eval (0, 30, '10s'), data / data;

+---------------------+-----------------------+-----------------------+-----------------------+
| ts                  | data.val1 / data.val1 | data.val2 / data.val2 | data.val3 / data.val3 |
+---------------------+-----------------------+-----------------------+-----------------------+
| 1970-01-01T00:00:00 | 1.0                   | 1.0                   | 1.0                   |
| 1970-01-01T00:00:10 | 1.0                   | 1.0                   | 1.0                   |
| 1970-01-01T00:00:20 | 1.0                   | 1.0                   | 1.0                   |
| 1970-01-01T00:00:30 | 1.0                   | 1.0                   | 1.0                   |
+---------------------+-----------------------+-----------------------+-----------------------+

-- SQLNESS SORT_RESULT 3 1
tql eval (0, 30, '10s'), data{__field__="val1"} + data{__field__="val2"};

+---------------------+-----------------------+
| ts                  | data.val1 + data.val2 |
+---------------------+-----------------------+
| 1970-01-01T00:00:00 | 101.0                 |
| 1970-01-01T00:00:10 | 202.0                 |
| 1970-01-01T00:00:20 | 303.0                 |
| 1970-01-01T00:00:30 | 303.0                 |
+---------------------+-----------------------+

-- SQLNESS SORT_RESULT 3 1
tql eval (0, 30, '10s'), data{__field__="val1", __field__="val2"} + data{__field__="val2", __field__="val3"};

+---------------------+-----------------------+-----------------------+
| ts                  | data.val1 + data.val2 | data.val2 + data.val3 |
+---------------------+-----------------------+-----------------------+
| 1970-01-01T00:00:00 | 101.0                 | 10100.0               |
| 1970-01-01T00:00:10 | 202.0                 | 20200.0               |
| 1970-01-01T00:00:20 | 303.0                 | 30300.0               |
| 1970-01-01T00:00:30 | 303.0                 | 30300.0               |
+---------------------+-----------------------+-----------------------+

drop table data;

Affected Rows: 1

