syntax = "proto3";

message WriteBatchProto {
  SchemaProto schema = 1;
  repeated MutationProto mutations = 2;
  uint64 num_rows = 3;
}

message SchemaProto {
  repeated ColumnSchemaProto column_schemas = 1;
}

// 有些值是重复的
message ColumnSchemaProto {
  string name = 1;
  ConcreteDataTypeProto  data_type = 2;
  bool is_nullable = 3;
}

message MutationProto{
  MutationTypeProto mutation_type = 1;
  map<string,ValueProto> put_datas = 2;
}

enum MutationTypeProto {
  PUT = 0;
  DELETE = 1;
}

enum ConcreteDataTypeProto {
  Null = 0;
  Boolean = 1;
  Int8 = 2;
  Int16 = 3;
  Int32 = 4;
  Int64 = 5;
  UInt8 = 6;
  UInt16 = 7;
  UInt32 = 8;
  UInt64 = 9;
  Float32 = 10;
  Float64 = 11;
  String = 12;
  Bytes = 13;
}


message ValueProto {
  repeated int32 i8_values = 1;
  repeated int32 i16_values = 2;
  repeated int32 i32_values = 3;
  repeated int64 i64_values = 4;
  repeated uint32 u8_values = 5;
  repeated uint32 u16_values = 6;
  repeated uint32 u32_values = 7;
  repeated uint64 u64_values = 8;
  repeated float f32_values = 9;
  repeated double f64_values = 10;
  repeated bool bool_values = 11;
  repeated bytes bytes_values = 12;
  repeated string string_values = 13;

  repeated bytes null_mask = 14;

  ConcreteDataTypeProto data_type = 15;
}
